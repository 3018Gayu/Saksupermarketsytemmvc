@model Saksupermarketsytemmvc.web.Controllers.DashboardViewModel
@{
    ViewData["Title"] = "Super Market Dashboard";
    var userRole = ViewData["UserRole"]?.ToString() ?? "";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
    body {
        background: #f5f7fa;
    }

    .dashboard-header {
        background: linear-gradient(90deg, #007bff, #00b4d8);
        padding: 25px;
        border-radius: 12px;
        color: white;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .stat-card {
        border-radius: 15px;
        transition: 0.3s;
        background: white;
        border: none;
    }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

    .stat-icon {
        font-size: 40px;
        margin-bottom: 10px;
    }

    .row-gap {
        row-gap: 25px;
    }
</style>

<div class="container mt-4">
    <div class="dashboard-header text-center">
        <h2 class="fw-bold"><i class="bi bi-speedometer2"></i> SAKSOFT SUPERMARKET SYSTEM DASHBOARD</h2>
        <p class="mb-0">Quick analytics overview of supermarket operations</p>
    </div>

    <div class="row justify-content-center row-gap">

        @* Admin or Inventory Manager: Products *@
        @if (userRole.Equals("Admin", StringComparison.OrdinalIgnoreCase) || userRole.Equals("Inventory Manager", StringComparison.OrdinalIgnoreCase))
        {
            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-box-seam text-primary stat-icon"></i>
                    <h5 class="card-title">Products</h5>
                    <h2 class="text-primary fw-bold">@Model.ProductsCount</h2>
                    <a asp-controller="Products" asp-action="Index" class="btn btn-outline-primary btn-sm mt-2">View Details</a>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-tags-fill text-success stat-icon"></i>
                    <h5 class="card-title">Categories</h5>
                    <h2 class="text-success fw-bold">@Model.CategoryCount</h2>
                    <a asp-controller="Categories" asp-action="Index" class="btn btn-outline-success btn-sm mt-2">View Details</a>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-truck text-warning stat-icon"></i>
                    <h5 class="card-title">Suppliers</h5>
                    <h2 class="text-warning fw-bold">@Model.SupplierCount</h2>
                    <a asp-controller="Suppliers" asp-action="Index" class="btn btn-outline-warning btn-sm mt-2">View Details</a>
                </div>
            </div>
        }

        @* Admin or Cashier: Customers *@
        @if (userRole.Equals("Admin", StringComparison.OrdinalIgnoreCase) || userRole.Equals("Cashier", StringComparison.OrdinalIgnoreCase))
        {
            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-people-fill text-info stat-icon"></i>
                    <h5 class="card-title">Customers</h5>
                    <h2 class="text-info fw-bold">@Model.CustomerCount</h2>
                    <a asp-controller="Customers" asp-action="Index" class="btn btn-outline-info btn-sm mt-2">View Details</a>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-receipt-cutoff text-danger stat-icon"></i>
                    <h5 class="card-title">Total Orders</h5>
                    <h2 class="text-danger fw-bold">@Model.OrdersCount</h2>
                    <a asp-controller="Orders" asp-action="Index" class="btn btn-outline-danger btn-sm mt-2">View Details</a>
                </div>
            </div>
        }

        @* Admin only: Users *@
        @if (userRole.Equals("Admin", StringComparison.OrdinalIgnoreCase))
        {
            <div class="col-md-3">
                <div class="card stat-card text-center p-4 shadow-sm">
                    <i class="bi bi-person-workspace text-secondary stat-icon"></i>
                    <h5 class="card-title">Users</h5>
                    <h2 class="text-secondary fw-bold">@Model.UserCount</h2>
                    <a asp-controller="Users" asp-action="Index" class="btn btn-outline-secondary btn-sm mt-2">View Details</a>
                </div>
            </div>
        }

    </div>
</div>
